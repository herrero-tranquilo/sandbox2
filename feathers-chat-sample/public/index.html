<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Feathers Example</title>
    <link
      rel="stylesheet"
      href="//unpkg.com/feathers-chat@4.0.0/public/base.css"
    />
    <link
      rel="stylesheet"
      href="//unpkg.com/feathers-chat@4.0.0/public/chat.css"
    />
    <style>
      input {
        display: block;
      }
    </style>
  </head>
  <body>
    <main id="main" class="container">
      <h1>Feathers sample app</h1>
      <form class="form" onsubmit="sendMessage(event.preventDefault())">
        <input type="text" id="email" placeholder="Email" />
        <input type="text" id="name" placeholder="Name" />
        <input type="text" id="githubid" placeholder="GithubId" />
        <input type="text" id="password" placeholder="Password" />
        <button type="submit" class="button button-primary">
          create user
        </button>
      </form>
    </main>

    <script src="https://unpkg.com/@feathersjs/client@^4.3.0/dist/feathers.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>
    <script type="text/javascript">
      const socket = io("http://localhost:3030");
      const app = feathers();

      app.configure(feathers.socketio(socket));

      async function sendMessage() {
        const emailInput = document.getElementById("email");
        const nameInput = document.getElementById("name");
        const githubidInput = document.getElementById("githubid");
        const passwordInput = document.getElementById("password");

        await app.service("users").create({
          email: emailInput.value,
          name: nameInput.value,
          githubId: githubidInput.value,
          password: passwordInput.value,
        });

        emailInput.value = "";
        nameInput.value = "";
        githubidInput.value = "";
        passwordInput.value = "";
      }

      // function addMessage(message) {
      //   document.getElementById("main").innerHTML += `<p>${message.text}</p>`;
      // }

      // const main = async () => {
      //   const messages = await app.service("messages").find();

      //   messages.forEach(addMessage);

      //   app.service("messages").on("created", addMessage);
      // };

      // main();
    </script>
  </body>
</html>
